{"ast":null,"code":"import _classCallCheck from\"C:/Users/angle/Desktop/ticketapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/angle/Desktop/ticketapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/angle/Desktop/ticketapp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/angle/Desktop/ticketapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/angle/Desktop/ticketapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import axios from'axios';import React from'react';import*as ReactDOM from'react-dom/client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseURL=\"http://52.10.102.239/tickets\";var ressource=axios.get(baseURL);// const expression = \"(e) => this.handleValidateTicket(ticket.id, e)\";\nvar PostTicket=/*#__PURE__*/function(_React$Component){_inherits(PostTicket,_React$Component);var _super=_createSuper(PostTicket);// state = {\n//   tickets: []\n// }\nfunction PostTicket(props){var _this;_classCallCheck(this,PostTicket);_this=_super.call(this,props);_this.state={tickets:[]};_this.handleDeleteTicket=_this.handleDeleteTicket.bind(_assertThisInitialized(_this));return _this;}_createClass(PostTicket,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(baseURL).then(function(res){var tickets=res.data;_this2.setState({tickets:tickets});});}},{key:\"handleDeleteTicket\",value:function handleDeleteTicket(id,event){var _this3=this;axios.put(\"\".concat(baseURL,\"/delete/\").concat(id)).then(function(response){_this3.setState({tickets:_this3.deleteTicket(id)});});}},{key:\"handleValidateTicket\",value:function handleValidateTicket(id,event){var _this4=this;axios.put(\"\".concat(baseURL,\"/update/\").concat(id)).then(function(response){_this4.setState({tickets:_this4.deleteTicket(id)});});}},{key:\"deleteTicket\",value:function deleteTicket(id){var filtered=this.state.tickets.filter(function(value,index,arr){return value.id!=id;});return filtered;}},{key:\"checkStatus\",value:function checkStatus(validationStatus,el){var _this5=this;if(validationStatus==1){return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){return _this5.handleValidateTicket(el,e);},className:\"btn btn-sm btn-success\",disabled:true,children:\"Valider\"});}else{return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){return _this5.handleValidateTicket(el,e);},className:\"btn btn-sm btn-success\",children:\"Valider\"});}}},{key:\"render\",value:function render(){var _this6=this;return this.state.tickets.map(function(ticket){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ticket.id}),/*#__PURE__*/_jsx(\"td\",{children:ticket.email}),/*#__PURE__*/_jsx(\"td\",{children:ticket.title}),/*#__PURE__*/_jsx(\"td\",{children:ticket.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6 text-center\",children:_this6.checkStatus(ticket.status,ticket.id)}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){return _this6.handleDeleteTicket(ticket.id,e);},className:\"btn btn-sm btn-danger\",children:\"Supprimer\"})})]})})]},ticket.id)});});}}]);return PostTicket;}(React.Component);export default PostTicket;","map":{"version":3,"sources":["C:/Users/angle/Desktop/ticketapp/src/PostTicket.js"],"names":["axios","React","ReactDOM","baseURL","ressource","get","PostTicket","props","state","tickets","handleDeleteTicket","bind","then","res","data","setState","id","event","put","response","deleteTicket","filtered","filter","value","index","arr","validationStatus","el","e","handleValidateTicket","map","ticket","email","title","description","checkStatus","status","Component"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React from 'react';\r\nimport * as ReactDOM from 'react-dom/client';\r\n\r\nconst baseURL = \"http://52.10.102.239/tickets\";\r\n\r\nconst ressource = axios.get(baseURL);\r\n// const expression = \"(e) => this.handleValidateTicket(ticket.id, e)\";\r\n\r\nclass PostTicket extends React.Component {\r\n  // state = {\r\n  //   tickets: []\r\n  // }\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tickets: []\r\n    };\r\n\r\n    this.handleDeleteTicket = this.handleDeleteTicket.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(baseURL)\r\n      .then(res => {\r\n        const tickets = res.data;\r\n        this.setState({ tickets });\r\n      })\r\n  }\r\n\r\n  handleDeleteTicket(id, event) {\r\n    axios.put(`${baseURL}/delete/${id}`).then((response) => {\r\n      this.setState({tickets: this.deleteTicket(id)})\r\n    });    \r\n  }\r\n\r\n  handleValidateTicket(id, event) {\r\n    axios.put(`${baseURL}/update/${id}`).then((response) => {\r\n      this.setState({tickets: this.deleteTicket(id)})\r\n    });\r\n  }\r\n\r\n  deleteTicket(id) {\r\n    var filtered = this.state.tickets.filter(function(value, index, arr){ \r\n      return value.id != id;\r\n    });\r\n    return filtered\r\n  }\r\n\r\n  \r\n\r\n  checkStatus (validationStatus, el) {\r\n    if (validationStatus == 1) {\r\n      return (\r\n        <button type=\"button\" onClick={(e) => this.handleValidateTicket(el, e)} className=\"btn btn-sm btn-success\" disabled>Valider</button>\r\n      );\r\n    } else {\r\n      return (\r\n        <button type=\"button\" onClick={(e) => this.handleValidateTicket(el, e)} className=\"btn btn-sm btn-success\">Valider</button>\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      this.state.tickets\r\n            .map(ticket =>\r\n              <React.Fragment>\r\n                <tr key={ticket.id}>\r\n                  <td>{ticket.id}</td>\r\n                  <td>{ticket.email}</td>\r\n                  <td>{ticket.title}</td>\r\n                  <td>{ticket.description}</td>\r\n                  <td>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-6 text-center\">\r\n                        {this.checkStatus(ticket.status, ticket.id)}\r\n                      </div>\r\n                      <div className=\"col-6 text-center\">\r\n                        <button type=\"button\" onClick={(e) => this.handleDeleteTicket(ticket.id, e)} className=\"btn btn-sm btn-danger\">Supprimer</button>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )\r\n      \r\n    )\r\n  }\r\n}\r\n\r\nexport default PostTicket;\r\n"]},"metadata":{},"sourceType":"module"}